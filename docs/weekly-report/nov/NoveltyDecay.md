# Influence Maximization with Novelty Decay in Social Networks

## 0 论文信息

**Author**: Shanshan Feng, Xuefeng Chen, Gao Cong, Yifeng Zeng, Yeow Meng Chee, Yanping Xiang

**Conference**: AAAI '14

## 1 论文背景

提出**新颖性衰减**对影响力传播的影响，即重复曝光对用户的影响会越来越小。

一个人反复接触一个想法可能会减少对个人的影响。例如，在 Twitter 中，用户第一次阅读该消息时转发的可能性比随后再看到消息的可能性更高。（第一次看到都没转发，之后再看到然后转发的可能性会降低）

 <img src="../NoveltyDecay-1.png" style="zoom: 25%;" />

以上图为例，分别计算考虑\不考虑新颖性衰减的情况：

> S={V~1~, V~2~}
>
> 不考虑新颖性衰减：
>
> $\sigma = 0.1 + (1-0.1)*0.7 + (1-0.1)*0.7*0.3$
>
> 考虑新颖性衰减:
>
> $\sigma = 0.1+\gamma(1-0.1)*0.7+\gamma(1-0.1)*0.7*0.3$
>
> 其中 $\gamma$ 为衰减因子

本文基于两个真实数据集分析了新颖性衰减对影响力传播的影响，同时设计了一个拟合函数来表征效果。通过以上设计，将新颖性衰减因子集成到影响传播模型中。


## 2 影响力传播的新颖性衰减

将新颖性衰减的计算形式化，并进一步确认其对两个公开可用数据集的影响。 

### 2.1 新颖性衰减函数

如果用户的 $n$ 个朋友受到影响，则该用户会接触事件 $n$ 次。设 $TP_n$ 为该用户的 $n$ 个朋友受到影响后该用户受到影响的概率，$p_n$ 为该用户的第 $n$ 个朋友受到影响后该用户受到影响的概率。对 $TP_n$ 和 $TP_{n-1}$ 之间的关系进行建模，

$TP_n =TP_{n−1} +(1−TP_{n−1})×p_n$

得到，

$p_n = (TP_n − TP_{n−1})/(1 − TP_{n−1})$

形式化新颖性衰减函数，

$f(n) = p_n/p_1$，其中，$p_1 = TP_1$ 。

采用指数函数 $f (n)=\gamma^{n−1}$ ，作为新颖性衰减函数的一般形式，并应用最小二乘法拟合函数来估计其参数 $\gamma$ 。

下图展示了新颖性衰减函数在 Digg 和 Flickr 数据集中的形式：

**Digg 数据集**

包含有关 Digg 的首页上推广的故事的信息。如果用户 u 将用户 v 列为好友，则可以查看 v 的活动。该数据集还列出了 Digg-votes，每个投票记录了用户对特定故事的投票和投票时间。它包含来自 139,409 个不同用户对 3,553 个流行故事的 3,018,197 票。

 <img src="../NoveltyDecay-2.png" style="zoom: 20%;" />

1. 当有足够数量的朋友 (n > 25) 为故事投票时，用户对故事的投票概率 $TP_n$ 接近饱和点。
2. 实际的新颖性随着重复曝光而减少。
3. 最佳拟合函数是 $f(n) = 0.2969^{n−1}$

**Flickr 数据集**

包含来自 Flickr 的友谊图和最喜欢的标记记录列表。如果用户 u 将 v 列为其好友，则可以看到 v 的活动（将照片标记为收藏）。为了研究照片如何通过 Flickr 社交网络传播，我们考虑活跃用户（至少有 5 个标记）和活跃用户照片（已被至少 100 个用户标记）。有 222,038 个活跃用户，通过 14,727,116 个链接和 3125 张活跃照片连接。

 <img src="../NoveltyDecay-3.png" style="zoom: 20%;" />

1. 左图标记概率 $TP (n)$ 在开始时随着 n 增加，在 n > 23 附近变得稳定。
2. 右图证实了新颖性衰减的影响，并显示了具有最小误差平方和 (SSE=2.7570) 的最佳拟合函数 $f(n) = 0.8918^{n−1}$。



### 2.2 具有新颖性衰减的 IC 模型

具有新颖性衰减的 IC 模型（$IC_{ND}$）每个边与两个参数相关联，即影响概率 $P_{uv}$ 和预期影响延迟时间 $T_{uv}$。

给定有向图 $G = (V,E)$、种子集 $S ⊆ V$ 和新颖性衰减函数 $f(n)$，ICND 模型的工作原理如下。

设 $A_t$ 是在时刻 $t ≥ 0$ 时激活的节点集，并且 $A_0 = S$。

每个节点 $u ∈ A_t$ 都有一次机会激活其在时间 $t + T_{uv}$ 的未被激活的邻居。节点 $u$ 以概率 $P_{uv} × f (n)$ 激活 $v$，其中 $n$ 是 $v$ 受到的曝光次数。曝光次数代表邻居节点打算激活未被激活节点的次数。影响传播过程在没有曝光次数后终止。

总激活节点数量记作 $σ(S) = ∑^∞_{t=0} |A_t|.$



### 2.3 问题定义和属性

**定义 1（具有新颖性衰减的影响最大化）**

给定社交网络 $G = (V , E )$、新颖性衰减函数 $f (n)$ 和正整数 $K$ ，找到最大化预期被激活节点数量的种子集 $S ⊆ V$。

$S = \arg \max_{S⊆V,|S|≤K}\{σ(S)|f(n)\}$

**命题 1  $IC_{ND}$ 模型下的影响函数既不是子模也不是单调的。**

<u>*Case 1: Non-monotonicity*</u>：$S_1 = \{V_1\}, S_2 = \{V_1, V_2\}, S_3 = \{V_1, V_2, V_3\}$， 则有 $σ(S1) = 2.7204, σ(S2) = 2.3757, σ(S3) = 3.3$ 因为 $σ(S_3) > σ(S_1) > σ(S_2)$, 所以 $σ(S)$ 是 ==非单调== 的。

*<u>Case 2: Non-submodularity</u>*: $S_1 = {V_1}, S_2 = {V_1, V_2}$ ，则有 $σ(S_1 ∪ {V_3}) − σ(S_1) = 0.3796, σ(S2 ∪ {V3}) − σ(S2) = 0.9243$，因为 $S_1 ⊆ S_2$ ，又 $σ(S_1 ∪ {V_3}) − σ(S_1) < σ(S_2 ∪ {V_3}) − σ(S_2)$，所以 $σ(S)$ 是 ==非子模== 的。



## 3 贪心算法及其优化

由于 $IC_{ND}$ 下影响扩散函数的非单调性和非次模性，传统的贪心算法变得不适用。因此使用 U-Greedy 算法，该算法是为解决社交网络中的影响最大化问题（具有非单调性和子模块性）而开发的。

### 3.1 R-Greedy Algorithm

U-Greedy 算法反复添加具有最大正边际影响的节点，直到达到完整的 K 个节点集。

We choose the first K nodes each of which has the maximal marginal influence, and then pick the set of seed nodes with the largest influence spread. 

调整后的算法称为普通受限贪婪算法（R-Greedy）。

### 3.2 动态修剪优化

让 $S_k(sk)$ 表示在第 $k$ 轮选择的种子集（单个节点）。R-Greedy 算法需要计算每个节点 $u ∈ V\backslash S_{k−1}$ 的边际影响。 

为了获得更高的效率，我们开发了一种优化方法，即动态剪枝方法 Dynamic Pruning(DP)，它利用先前的影响传播计算来选择 R-Greedy 算法中的潜在种子节点。 完整的算法如算法 1 所示。

 <img src="../NoveltyDecay-4.png" style="zoom: 30%;" />

用 $Q_k$ 存储第 $k$ 轮的节点及其信息，用二元组$(u, Inf_k^u)$表示，其中 $Inf_k^u = σ((S_{k−1} ∪ {u})$ 表示若第 $k$ 轮将节点 $u$ 作为种子将得到的影响力大小。

 <img src="../NoveltyDecay-5.png" style="zoom: 20%;" />



## 4 计算影响力传播的算法

**基于模拟的算法**

通过考虑模型中的传播延迟时间和新颖性衰减效应来调整算法以模拟 ICND 模型的传播过程。 为了获得平均影响扩散值，需要进行大量的模拟。 总体而言，基于模拟的方法 (MC) 与算法 1 的时间复杂度为 O(K|V|R(|V| + |E|))，其中 R 是通常设置为 20,000 的模拟次数。

**基于传播路径的算法**

基于模拟的算法耗时且不适合大型社交网络，因此开发了一种基于传播路径的算法来有效地估计影响传播。

**具有新颖性衰减的传播路径** ($PP_{ND}$)

给定一个种子集，$S ⊆ V$，其预期影响力大小为 $\sigma (S)=\sum_{u\in V} AP_s(u)$，$AP_s(u)$ 是节点 $u$ 被种子集 $S$ 激活的概率。

为了预测 $AP_s(u)$ ，定义了具有新颖性衰减的传播路径。

用 $h=(u_1 \stackrel{e_1}{\longrightarrow} u_2 \stackrel{e_2}{\longrightarrow} u_3... \stackrel{e_{k-1}}{\longrightarrow} u_k)$ 表示一条 $PP_{ND}$ 路径，其中 $u_1 \in S, \ u_i \notin S$。

路径长度表示为 $Len(h)= \sum_{i=1}^{i=k-1} T_e$ 。

路径的概率表示为 $\prod _{i=1}^{i=k-1}P(e_i) \times \widehat{E}(\tau^h(u_{i+1}))$，其中 $\widehat{E}(\tau^h(u_{i+1}))$ 是 $u_{i+1}$ 上 $h$ 的预期新颖性衰减值， $\widehat{E}(\tau^h(u))$ 取决于以 $u$ 结尾的所有路径的顺序。

**计算预期新颖性衰减值**

计算 $\widehat{E}(\tau^h(u))$ 

一条 $PP_{ND}$ 路径有两种状态，*`connected`* 连通的 和 *`blocked`* 阻塞的，当路径中的 $u1, ..., uk−1$ 都被激活，那么就为 *`connected`*，否则为 *`blocked`*。

$PP_{ND}$ 路径如果是 *`connected`* 的，就有一次机会去激活路径的结束节点（ending node）。

 *`connected`*  概率为 $P_{con} = \prod _{i=1}^{i=k−2}P(e_i) × τ^h(u_{i+1})$， *`blocked`* 概率即为 $1-P_{con}$ 。

对于节点 $u_k$，如果路径 $h$ 是第 $i$ 条曝光它的路径，那么路径 $h$ 为所有以节点 $u_k$ 为结尾的路径中排第 $i$ 的路径。

假设 $h_c$ 是节点 $u$ 的第 $c$ 条路径，要计算 $\widehat{E}(\tau^{h_c}(u))$，则需要考虑路径 $h_{c-1}$ 的所有可能的状态，以  $\widehat{E}(\tau^{h_3}(u))$ 为例，

$\widehat{E}(\tau^{h_3}(u)) = P_{blo}(h_1) \times P_{blo}(h_2) \times f(1) + P_{blo}(h_1) \times P_{con}(h_2) \times f(2) + P_{con}(h_1) \times P_{blo}(h_2) \times f(2) + P_{con}(h_1) \times P_{con}(h_2) \times f(3).$

**寻找** $PP_{ND}$

对于给定的种子集 $S$，我们使用 $PP_{ND}(u, S)$ 表示从 $S$ 到节点 $u$ 的所有 $PP_{ND}$ 路径。 很明显，每条路径都为 $S$ 提供了激活 $u$ 的机会。 由于路径的数量 $|PP_{ND} (u, S )|$ 随种子节点的数量呈指数增长，因此对于大 $S$，找到 $PP_{ND}(u, S)$ 的计算成本很高。

因此设计了两个限制来剪枝掉影响贡献小的 $PP_{ND}$ 路径:

1. 修剪概率小于指定阈值 θ > 0 的路径。
2. 在 $PP_{ND}(u, S)$ 中最多保留 $C$ 条路径，因为由于新颖性衰减，用户在多次曝光后不太可能受到影响。得到的 $PP_{ND}$ 用 $PP_{ND}^{θ,C} (u, S)$ 表示。

用 adapted Dijkstra (AD) 算法来实现寻找路径。

与 Dijkstra 算法一样，AD 采用贪心搜索策略为选择最短路径。为了满足 $θ$ 约束，AD 只在每次迭代中扩展满足约束的路径。

 <img src="../NoveltyDecay-6.png" style="zoom: 30%;" />



## 5 实验

### 5.1 实验设置

**数据集**

Digg、Flickr、Wiki、NetPHY

**评估方法**

评估了普通的 R-Greedy 算法（RGA）和改进的 R-Greedy 算法（算法 1）（RGA-DP）。这两种算法都使用基于模拟的算法 (MC) 或基于传播路径的算法（算法 2）（PPAN）来计算影响扩散。

然后将它们与两种传统的影响最大化算法进行比较：基于经典 MC 的技术 CIM-MC 和基于度的算法 DE（选择具有最大度的 K 个节点）。 MC 方法用于计算每种方法返回的种子集的影响范围。

**参数设置**

边的激活概率 $P_{uv} = \frac{1}{indegree(v)}$

边 $uv$ 的预期影响延迟时间 $T_{uv}$ 遵循几何延迟分布（参考了其他论文的研究，还尝试了其他 $T_{uv}$ 分布，例如泊松分布和均匀分布，结果相似），设置为 $5/(outdegree(v)+5)$ ，为简单起见，最大值设置为 15。

阈值 $θ$ 设置为 $θ = 0.001$

路径数 $C$ 设置为 $C = 5$

### 5.2 实验结果



**实验一  R-Greedy 算法及 PPAN 算法**

研究了 DP 优化对 R-Greedy 算法的影响。MC 和 PPAN 都用于计算影响力传播。下图显示了 Wiki 和 NetPHY 上的结果，因为 MC 无法完成大型 Digg 和 Flickr 网络。

RGA-DP 在两个数据集上都比 RGA 快 1-2 个数量级。因此，如果适用，我们在剩余的实验中使用 RGA-DP。 

DP 优化不会影响 RGA 的影响传播，因此不比较它们的影响范围。

 <img src="../NoveltyDecay-7.png" style="zoom: 20%;" />


**实验二 Influence Spread**

 <img src="../NoveltyDecay-8.png" style="zoom: 20%;" />


**实验三 Running Time**

 <img src="../NoveltyDecay-9.png" style="zoom: 20%;" />

